/**
 * 平滑移動到定位
 * @param hashId
 */
var scrollLink = function (hashId) {
    var dom = $('#' + hashId);
    if (dom.length > 0) {
        if ($('.navigation-mobile').hasClass('nav-open')) {
            $('.navigation-mobile-btn').trigger('click');
        }

        var navHeight = $('nav').height();
        $('html,body').animate({scrollTop: dom.offset().top - navHeight - 30});
    } else {
        location.href = './index.html?link=' + hashId;
    }

}


/**
 * 控制手機版漢堡開關
 */
var navigationControl = function () {
    $('.navigation-mobile-btn').on('click', function () {
        $('.bar').toggleClass('animate');
        $('.navigation-mobile').toggleClass('nav-open')
    })
}


/**
 * 設定是否為行動裝置
 */
var settingMobileCheck = function () {
    var pgwBrowser = $.pgwBrowser();
    var isMobile = pgwBrowser.device.mobile;
    window.localStorage["mobile"] = isMobile;
    // if (isMobile) {
    //     $('body').addClass('is-mobile');
    // }
}



var appInit = function () {

    settingSyscode();
    settingMobileCheck();

    w3.includeHTML(function () {

        if (window.pageInit) {
            //各頁面Init初始
            pageInit();
        }

        navigationControl();

        var goLink = getParameterName('link');
        if (goLink) {
            var dom = $('#' + goLink);
            var navHeight = $('nav').height();
            $('html,body').scrollTop(dom.offset().top - navHeight - 30);
        }

    });



}


appInit();
